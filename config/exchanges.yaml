# Exchange-specific configuration for data collectors

binance:
  name: "Binance"
  type: "crypto"
  enabled: true
  websocket:
    base_url: "wss://stream.binance.com:9443"
    streams:
      - "trade"
      - "kline_1m"
      - "kline_5m"
      - "kline_15m"
      - "kline_1h"
    reconnect:
      initial_delay: 1  # seconds
      max_delay: 60
      multiplier: 2
    refresh_interval: 86400  # 24 hours in seconds
  rest:
    base_url: "https://api.binance.com"
    rate_limit:
      requests_per_minute: 1200
      weight_per_minute: 6000
  circuit_breaker:
    failure_threshold: 5
    timeout: 60  # seconds
    success_threshold: 2

yahoo:
  name: "Yahoo Finance"
  type: "stocks"
  enabled: false  # Disabled due to rate limiting
  polling:
    interval: 300  # 5 minutes in seconds
    timeout: 30
  rest:
    base_url: "https://query1.finance.yahoo.com"
    rate_limit:
      requests_per_minute: 60
      backoff:
        initial_delay: 10
        max_delay: 300
        multiplier: 2
  market_hours:
    timezone: "America/New_York"  # US Eastern Time
    open: "09:30"
    close: "16:00"
    days: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
  circuit_breaker:
    failure_threshold: 3
    timeout: 120
    success_threshold: 2

polygon:
  name: "Polygon.io"
  type: "stocks"
  enabled: true
  api_key: "${POLYGON_API_KEY}"  # Set in .env file
  polling:
    interval: 120  # 2 minutes (10 symbols, 5 req/min limit)
    timeout: 30
  rest:
    base_url: "https://api.polygon.io"
    rate_limit:
      requests_per_minute: 5  # Free tier limit
      backoff:
        initial_delay: 10
        max_delay: 300
        multiplier: 2
  market_hours:
    timezone: "America/New_York"  # US Eastern Time
    open: "09:30"
    close: "16:00"
    days: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
  circuit_breaker:
    failure_threshold: 3
    timeout: 120
    success_threshold: 2

# Data quality validation settings
data_quality:
  price_anomaly:
    z_score_threshold: 3.0
    percentage_change_threshold: 0.10  # 10%
  data_freshness:
    max_age_seconds: 60
  volume_sanity:
    multiplier_threshold: 100  # 100x average
  history_window_size: 100

# Performance targets
performance:
  websocket_latency_ms: 50
  bar_completion_ms: 100
  indicator_calculation_ms: 200
  api_response_ms: 100
  frontend_fps: 60
